stages:
    - compile
    - test

variables:
    GIT_SUBMODULE_STRATEGY: recursive
    GIT_STRATEGY: clone

try_compiling:
    stage: compile
    script:
        - ls -la  lib/cudd
        - mkdir -p build
        - cd build
        - cmake ..
        - make cudd # needs to be build separately (dunno why)
        - make all

# cpp check is put in a separate script file as we want to perform stuff that
# fits this yaml style rather badly
run_cppcheck:
    stage: test
    script:
        - ./stylecheck.sh

run_tests:
    stage: test
    script:
        - pwd
        - ls -la
        - ls -la build
        - ls -la build/tests
        - ./build/tests/error_metrics_test
        - ./build/tests/operations_test
        - ./build/tests/parsing_test
